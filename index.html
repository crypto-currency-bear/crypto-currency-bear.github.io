<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="UTF-8">
    <title>주식, 코인 물타기 계산기</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
</head>
<body>

<v-container id="app" fluid style="max-width: 700px;">
    <v-row>
        <v-col>
            <v-subheader><h2>주식, 코인 물타기 계산기</h2></v-subheader>
            <v-subheader>수수료가 발생할 경우 결과값에 차이가 있을 수 있습니다.</v-subheader>
        </v-col>
    </v-row>

    <v-row>
        <v-col>
            <v-card>
                <v-card-title>현재 보유</v-card-title>
                <v-card-text>
                    <v-row>
                        <v-col cols="12" sm="4">
                            <v-text-field
                                ref="currentBuyingPrice"
                                v-model="currentCurrency.buyingPrice"
                                type="number"
                                label="매수 평균가"
                                @input="onInputBuyingPrice(currentCurrency)"
                            ></v-text-field>
                        </v-col>
                        <v-col cols="12" sm="4">
                            <v-text-field
                                v-model="currentCurrency.holdingQuantity"
                                type="number"
                                label="보유 수량"
                                @input="val => onInputHoldingQuantity(currentCurrency, val)"
                            ></v-text-field>
                        </v-col>
                        <v-col cols="12" sm="4">
                            <v-text-field
                                v-model="currentCurrency.totalBuyingPrice"
                                type="number"
                                label="매수 금액"
                                @input="val => onInputTotalBuyingPrice(currentCurrency, val)"
                            ></v-text-field>
                        </v-col>
                    </v-row>
                </v-card-text>
            </v-card>
        </v-col>
    </v-row>

    <v-row
        v-for="(v, i) in currenciesToAdd"
        :key="i"
    >
        <v-col>
            <v-card>
                <v-card-title>
                    <v-row justify="center">
                        <v-col cols="auto">
                            추가 매수
                        </v-col>
                        <v-spacer></v-spacer>
                        <v-col cols="auto">
                            <v-btn
                                v-if="i === 0"
                                tile
                                @click="onClickAddCurrency"
                            >
                                +
                            </v-btn>
                            <v-btn
                                v-if="i !== 0"
                                tile
                                @click="onClickRemoveCurrency(i)"
                            >
                                -
                            </v-btn>
                        </v-col>
                    </v-row>
                </v-card-title>
                <v-card-text>
                    <v-row>
                        <v-col cols="12" sm="4">
                            <v-text-field
                                ref="addedBuyingPrice"
                                v-model="v.buyingPrice"
                                type="number"
                                label="단가"
                                @input="onInputBuyingPrice(v)"
                            ></v-text-field>
                        </v-col>
                        <v-col cols="12" sm="4">
                            <v-text-field
                                :value="v.holdingQuantity"
                                type="number"
                                label="보유 수량"
                                @input="quantity => onInputHoldingQuantity(v, quantity)"
                            ></v-text-field>
                        </v-col>
                        <v-col cols="12" sm="4">
                            <v-text-field
                                :value="v.totalBuyingPrice"
                                type="number"
                                label="총 매수 금액"
                                @input="price => onInputTotalBuyingPrice(v, price)"
                            ></v-text-field>
                        </v-col>
                    </v-row>
                </v-card-text>
            </v-card>
        </v-col>
    </v-row>

    <v-row style="position: -webkit-sticky; position: sticky; bottom: 0;">
        <v-col>
            <v-card>
                <v-card-title>결과</v-card-title>
                <v-card-text>
                    <v-row>
                        <v-col cols="12" sm="4">
                            <v-text-field
                                v-model="resultCurrency.buyingPrice"
                                type="number"
                                label="매수 평균가"
                                disabled
                            ></v-text-field>
                        </v-col>
                        <v-col cols="12" sm="4">
                            <v-text-field
                                v-model="resultCurrency.totalHoldingQuantity"
                                type="number"
                                label="보유 수량"
                                disabled
                            ></v-text-field>
                        </v-col>
                        <v-col cols="12" sm="4">
                            <v-text-field
                                v-model="resultCurrency.totalBuyingPrice"
                                type="number"
                                label="매수 금액"
                                disabled
                            ></v-text-field>
                        </v-col>
                    </v-row>
                </v-card-text>
            </v-card>
        </v-col>
    </v-row>
</v-container>

</body>
</html>

<script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
<script src="./app.js"></script>
